const config={version:"1.0.0",dataRoot:"data/",daysToRememberProgress:60};$(document).ready(function(){const r="check",H=["1","A"];var l=[],J="unknown",n=0,I=0,E={},f=c("d"),v="",a=x();$(".print-btn").click(function(){window.print()});$(".dark-theme-btn").click(function(){y("dark")});$(".light-theme-btn").click(function(){y("light")});if(c("wipe")==="true"){s()}o();var t=w("theme");y(t?t:"light");if(f){v=config.dataRoot+f+".json";$.getJSON(v+"?t="+Date.now(),function(K){J=K.id;$("#dynamicContentContainer").html(g(K));$(".page-title").html(K.name);q(h());$(".complete-check").click(function(){p($(this).parent().parent().attr("id"),false)});$(".incomplete-check").click(function(){p($(this).parent().parent().attr("id"),true)})}).fail(function(){$("#dynamicContentContainer").html('<div class="alert alert-danger" role="alert"><strong>Oh snap!</strong> Failed to load data set.</div>')}).always(function(){$(".loaded-content").show();$(".loading-overlay").remove()})}else{$("#dynamicContentContainer").html('<div class="alert alert-warning" role="alert"><strong>Whoops!</strong> No parameter supplied. Check to make sure that the URL is correct.</div>');$(".loaded-content").show();$(".loading-overlay").remove()}function y(K){if(K==="dark"){$("nav.navbar").addClass("navbar-inverse");$("nav.navbar").removeClass("navbar-default");$("body").addClass("darktheme");$(".dark-theme-btn").hide();$(".light-theme-btn").show()}else{$("nav.navbar").addClass("navbar-default");$("nav.navbar").removeClass("navbar-inverse");$("body").removeClass("darktheme");$(".light-theme-btn").hide();$(".dark-theme-btn").show()}G("theme",K);$("#dynamicContentContainer").hide();setTimeout(function(){$("#dynamicContentContainer").show()},1)}function c(K){var N=decodeURIComponent(window.location.search.substring(1)),M=N.split("&"),O,L;for(L=0;L<M.length;L++){O=M[L].split("=");if(O[0]===K){return O[1]===undefined?true:O[1]}}}function q(L){var K=0;while(K<L.length){if(E[L[K]]!=null){p(L[K],true)}K++}d()}function d(){var K=0;if(n>0){K=I/n*100;K=Math.round(K*10)/10}if(K>100){K=100}$(".progress-bar").attr("aria-valuenow",K);$(".progress-bar").css("width",K+"%");$(".progress").attr("title",K+"%")}function p(S,Q,U){U=typeof U!=="undefined"?U:false;const R="alert-success",T="complete-check",O="incomplete-check";var N=$("#"+S+" > div.alert");if(Q){if(!C(S)){l.push(S);if(E[S]){I+=E[S]}$(N).addClass(R)}}else{var V=l.indexOf(S);if(V!==-1){l.splice(V,1);if(E[S]){I-=E[S]}$(N).removeClass(R)}}A(l);$(N.selector+" > span."+(Q?O:T)).hide();$(N.selector+" > span."+(Q?T:O)).show();if(!U){var W=F(S);for(var P=0;P<W.length;P++){if(Q&&!C(W[P])||!Q&&C(W[P])){p(W[P],Q)}}}var M=b(S);if(M){var K=true;var L=j(S);for(var P=0;P<L.length;P++){if(Q===C(L[P])){K=true;if(!Q){break}}else{K=false;if(Q){break}}}if(K){p(M,Q,true)}}d()}function j(M){var K=[],N=b(M);for(var L in E){if(N===b(L)){K.push(L)}}return K}function b(K){var L=K.substring(0,K.lastIndexOf("-"));return L!==""?L:null}function F(M){var K=[];for(var L in E){if(b(L)===M){K.push(L)}}return K}function C(K){return l.indexOf(K)!==-1}function g(L){var K=[];if(L.description){K.push('<div class="description">'+L.description+"</div>")}if(L.notice){K.push('<div class="alert alert-warning"><strong>Notice:&nbsp;</strong>'+L.notice+"</div>")}D(L.tasks,K);return K.join("")}function D(R,M,O){var K=0;M.push('<ol type="'+e(O)+'">');while(K<R.length){var N=R[K].id;var L=R[K].checkable!=null?R[K].checkable:true;var Q=R[K].progressPoints!=null?R[K].progressPoints:1;if(L){n+=Q;E[N]=Q}M.push('<li id="'+N+'">');M.push('<div class="alert task-alert">');if(L){M.push('<span class="incomplete-check glyphicon glyphicon-unchecked" aria-hidden="true" title="Click to mark task complete"></span>');M.push('<span class="complete-check glyphicon glyphicon-ok" aria-hidden="true" title="Click to mark task incomplete" style="display: none;"></span>')}M.push('<span class="task">'+R[K].description+"</span>");if(R[K].items&&R[K].items.length>0){var P=0;while(P<R[K].items.length){M.push('<div class="task-item-container">');switch(R[K].items[P].type){case"text":M.push("<span>"+R[K].items[P].content+"</span>");break;case"raw":M.push("<pre>"+R[K].items[P].content+"</pre>");break;case"image":M.push('<img src="'+B(R[K].items[P].imageFile)+'" style="height: auto; width: '+(R[K].items[P].width?R[K].items[P].width+"px":"auto")+';" alt="'+R[K].items[P].altText+'" title="'+R[K].items[P].altText+'"/>');break;case"download":M.push('<a href="'+B(R[K].items[P].file)+'" download>'+R[K].items[P].description+" (download)</a>");break;case"link":M.push('<a href="'+R[K].items[P].location+'" target="_blank">'+R[K].items[P].description+" (link)</a>");break}M.push("</div>");P++}}if(R[K].tasks){D(R[K].tasks.slice(),M,e(O))}M.push("</div>");M.push("</li>");K++}M.push("</ol>");return M}function B(K){var L=K;if(!i(K)){L=v.substr(0,v.lastIndexOf("/")+1)+K}return L}function i(K){if(K.indexOf("http:")===0||K.indexOf("https:")===0){return true}return false}function e(L){var K=H.indexOf(L);if(K!=-1&&K<(H.length-1)){return H[K+1]}return H[0]}function h(){var K=u();return K.completedTasks}function A(L){var K=u();K.updatedDate=Date();K.completedTasks=L;k(K)}function u(){var K=w("progress");if(!K){K={}}if(!K[J]){K[J]={updatedDate:0,completedTasks:[]}}return K[J]}function k(L){var K=w("progress");if(!K){K={}}K[J]=L;G("progress",K)}function o(){var P=w("progress"),N=[],L=new Date();if(!P){P={}}L.setDate(L.getDate()-config.daysToRememberProgress);for(var O in P){var K=new Date(P[O].updatedDate);if(K<L){N.push(O)}}var M=0;while(M<N.length){delete P[N[M]];M++}G("progress",P)}function w(K){var L=m();return !L[K]?null:L[K]}function G(K,L){var M=m();M[K]=L;z(M)}function s(){z({})}function m(){var K={};if(a&&localStorage[r]!=null){K=JSON.parse(localStorage.getItem(r))}return K}function z(K){if(a){localStorage.setItem(r,JSON.stringify(K))}}function x(){try{return"localStorage" in window&&window.localStorage!==null}catch(K){return false}}});