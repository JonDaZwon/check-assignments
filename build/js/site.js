const config = { version: "1.0.1", dataRoot: "data/", daysToRememberProgress: 60 }; $(document).ready(function () { function t() { var t = $($("i.incomplete-check:visible,i.complete-check:visible").first()); if (t.length) { var e = $(".progress"); e.attr("title", "Overall progress will be shown here"), window.scrollTo(0, 0), t.tooltip({ trigger: "manual" }).tooltip("show").on("mouseover", function () { $(this).tooltip("destroy") }), e.tooltip({ placement: "bottom", trigger: "manual" }).tooltip("show").on("mouseover", function () { $(this).tooltip("destroy") }) } y("viewedTutorial", !0) } function e(t) { "dark" === t ? ($("nav.navbar").addClass("navbar-inverse"), $("nav.navbar").removeClass("navbar-default"), $("body").removeClass("lighttheme"), $("body").addClass("darktheme"), $(".dark-theme-btn").hide(), $(".light-theme-btn").show()) : ($("nav.navbar").addClass("navbar-default"), $("nav.navbar").removeClass("navbar-inverse"), $("body").removeClass("darktheme"), $("body").addClass("lighttheme"), $(".light-theme-btn").hide(), $(".dark-theme-btn").show()), y("theme", t), $("#dynamicContentContainer").hide(), setTimeout(function () { $("#dynamicContentContainer").show() }, 1) } function n(t) { var e, n, a = decodeURIComponent(window.location.search.substring(1)), i = a.split("&"); for (n = 0; n < i.length; n++) if (e = i[n].split("="), e[0] === t) return void 0 === e[1] ? !0 : e[1] } function a(t) { for (var e = 0; e < t.length;) null != J[t[e]] && r(t[e], !0), e++; i() } function i() { var t = 0; N > 0 && (t = P / N * 100, t = Math.round(10 * t) / 10), t > 100 && (t = 100), $(".progress-bar").attr("aria-valuenow", t), $(".progress-bar").css("width", t + "%"), $(".progress").attr("title", t + "%") } function r(t, e, n) { n = "undefined" != typeof n ? n : !1; const a = "alert-success", d = "complete-check", u = "incomplete-check"; var h = $("#" + t + " > div.alert"); if (e) c(t) || (R.push(t), J[t] && (P += J[t]), $(h).addClass(a)); else { var p = R.indexOf(t); -1 !== p && (R.splice(p, 1), J[t] && (P -= J[t]), $(h).removeClass(a)) } if (v(R), $(h.selector + " > i." + (e ? u : d)).hide(), $(h.selector + " > i." + (e ? d : u)).show(), !n) for (var f = l(t), m = 0; m < f.length; m++) (e && !c(f[m]) || !e && c(f[m])) && r(f[m], e); var g = s(t); if (g) { for (var k = !0, b = o(t), m = 0; m < b.length; m++) if (e === c(b[m])) { if (k = !0, !e) break } else if (k = !1, e) break; k && r(g, e, !0) } i() } function o(t) { var e = [], n = s(t); for (var a in J) n === s(a) && e.push(a); return e } function s(t) { var e = t.substring(0, t.lastIndexOf("-")); return "" !== e ? e : null } function l(t) { var e = []; for (var n in J) s(n) === t && e.push(n); return e } function c(t) { return -1 !== R.indexOf(t) } function d(t) { var e = []; return t.description && e.push('<div class="description">' + t.description + "</div>"), t.notice && e.push('<div class="alert alert-warning"><strong>Notice:&nbsp;</strong>' + t.notice + "</div>"), u(t.tasks, e), e.join("") } function u(t, e, n) { var a = 0; for (e.push('<ol type="' + f(n) + '">') ; a < t.length;) { var i = t[a].id, r = t[a].description, o = null != t[a].checkable ? t[a].checkable : !0, l = null != t[a].progressPoints ? t[a].progressPoints : 1; if (o && (N += l, J[i] = l), F && !s(t[a].id) && (e.push("<hr>"), r = "<strong>" + r + "</strong>"), e.push('<li id="' + i + '">'), e.push('<div class="alert task-alert">'), o && (e.push('<i class="incomplete-check fa fa-square-o fa-lg" aria-hidden="true" title="Click to mark task complete or incomplete"></i>'), e.push('<i class="complete-check fa fa-check-square-o fa-lg" aria-hidden="true" title="Click to mark task complete or incomplete" style="display: none;"></i>')), t[a].icon && e.push('<i class="fa ' + t[a].icon + ' fa-lg"></i>'), e.push('<span class="task">' + r + "</span>"), t[a].items && t[a].items.length > 0) for (var c = 0; c < t[a].items.length;) { switch (e.push('<div class="task-item-container">'), t[a].items[c].icon && e.push('<i class="fa ' + t[a].items[c].icon + ' fa-lg"></i>'), t[a].items[c].type) { case "text": e.push("<span>" + t[a].items[c].content + "</span>"); break; case "raw": e.push("<pre>" + t[a].items[c].content + "</pre>"); break; case "image": var d = h(t[a].items[c].imageFile); e.push('<a href="' + d + '" target="_blank"><img src="' + d + '" class="img-thumbnail" style="height: auto; width: ' + (t[a].items[c].width ? t[a].items[c].width + "px" : "auto") + ';" alt="' + t[a].items[c].altText + '" title="' + t[a].items[c].altText + '"/></a>'); break; case "download": e.push('<a href="' + h(t[a].items[c].file) + '" download>' + t[a].items[c].description + " (download)</a>"); break; case "link": e.push('<a href="' + t[a].items[c].location + '" target="_blank">' + t[a].items[c].description + "</a>") } e.push("</div>"), c++ } t[a].tasks && t[a].tasks.length > 0 && u(t[a].tasks.slice(), e, f(n)), e.push("</div>"), e.push("</li>"), a++ } return e.push("</ol>"), e } function h(t) { var e = t; return p(t) || (e = q.substr(0, q.lastIndexOf("/") + 1) + t), e } function p(t) { return 0 === t.indexOf("http:") || 0 === t.indexOf("https:") ? !0 : !1 } function f(t) { var e = S.indexOf(t); return -1 != e && e < S.length - 1 ? S[e + 1] : S[0] } function m() { var t = g(); return t.completedTasks } function v(t) { var e = g(); e.updatedDate = Date(), e.completedTasks = t, k(e) } function g() { var t = w("progress"); return t || (t = {}), t[I] || (t[I] = { updatedDate: 0, completedTasks: [] }), t[I] } function k(t) { var e = w("progress"); e || (e = {}), e[I] = t, y("progress", e) } function b() { var t = w("progress"), e = [], n = new Date; t || (t = {}), n.setDate(n.getDate() - config.daysToRememberProgress); for (var a in t) { var i = new Date(t[a].updatedDate); n > i && e.push(a) } for (var r = 0; r < e.length;) delete t[e[r]], r++; y("progress", t) } function w(t) { var e = T(); return e[t] ? e[t] : null } function y(t, e) { var n = T(); n[t] = e, O(n) } function C() { O({}) } function T() { var t = {}; return U && null != localStorage[D] && (t = JSON.parse(localStorage.getItem(D))), t } function O(t) { U && localStorage.setItem(D, JSON.stringify(t)) } function x() { try { return "localStorage" in window && null !== window.localStorage } catch (t) { return !1 } } const D = "check", S = ["1", "A"]; var R = [], I = "unknown", N = 0, P = 0, J = {}, j = n("d"), q = "", F = !1, U = x(); $(".print-btn").click(function () { window.print() }), $(".dark-theme-btn").click(function () { e("dark") }), $(".light-theme-btn").click(function () { e("light") }), $(".tutorial-btn").click(function () { t() }), "true" === n("wipe") && C(), b(); var _ = w("theme"); e(_ ? _ : "light"), j ? (q = config.dataRoot + j + ".json", $.getJSON(q + "?t=" + Date.now(), function (t) { I = t.id, F = t.emphasizeRootTasks, $("#dynamicContentContainer").html(d(t)), $(".page-title").html(t.name), a(m()), $(".complete-check").click(function () { r($(this).parent().parent().attr("id"), !1) }), $(".incomplete-check").click(function () { r($(this).parent().parent().attr("id"), !0) }) }).fail(function () { $("#dynamicContentContainer").html('<div class="alert alert-danger" role="alert"><strong>Oh snap!</strong> Failed to load data set.</div>') }).always(function () { $(".loaded-content").show(), $(".loading-overlay").remove(), w("viewedTutorial") || setTimeout(function () { t() }, 1) })) : ($("#dynamicContentContainer").html('<div class="alert alert-warning" role="alert"><strong>Whoops!</strong> No parameter supplied. Check to make sure that the URL is correct.</div>'), $(".loaded-content").show(), $(".loading-overlay").remove()) });